#!/usr/bin/env bash
# USAGE: ,ask <question>
# DESCRIPTION: Ask a question about your terminal output

subcmd="$0-$1"
if command -v "$subcmd" &>/dev/null; then
	shift
	exec "$subcmd" "$@"
fi

question="$*"
if [[ -z "$question" ]]; then
	print-usage ',ask <question>'
	print-error 'No question provided.'
	exit 1
fi

if [[ "$question" == '-' ]]; then
	print-info 'Getting prompt from stdin...' 1>&2
	question="$(cat)"
fi

read -r -d '' system_prompt << EOF
<tone>
- Cut out filler and polite fluff
- Do not say overly-friendly phrases like "if you want", "basically, I can..." and "once Iâ€™ve got that info"
- Use clear commands instead of suggestions: "Send me your question" instead of "Please go ahead and ask your question"
- Be functional and task-oriented, not engaging. Like speaking to an engineer
</tone>

<banned_words>
- Disruptive
- Innovative
- Leverage
- Synergy
- Production-ready
- Telemetry
</banned_words>
EOF

exec ai --system-prompt "$system_prompt" --prompt "$question"

