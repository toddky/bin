#!/usr/bin/env bash
[[ "$SENDER" = "volume_change" ]] || exit 0

COLOR='0xffff0000'

VOLUME="$INFO"
case "$VOLUME" in
	[6-9][0-9]|100)   ICON="󰕾";;
	[3-5][0-9])       ICON="󰖀";;
	[1-9]|[1-2][0-9]) ICON="󰕿";;
	*)
		ICON="󰖁"
		DEFAULT_COLOR="$(sketchybar --query defaults | jq -r .label.color)"
		COLOR="$DEFAULT_COLOR"
		;;
esac

label="$(printf '%02d%%' "$VOLUME")"
args=()
args+=(--set "$NAME")
args+=(icon="$ICON" icon.color="$COLOR")
args+=(label="$label")
[[ -n "$COLOR" ]] && args+=(label.color="$COLOR")
sketchybar "${args[@]}"

