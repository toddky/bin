#!/usr/bin/env bash
if ! (type amixer >/dev/null); then
	notify-send -t 2000 -u critical 'amixer command not found.'
	exit 2
fi

if [[ "$1" == "up" ]]; then
	# Increase volume
	#pactl set-sink-volume @DEFAULT_SINK@ +5%
	amixer -q sset Master 5%+

elif [[ "$1" == "down" ]]; then
	# Decrease volume
	#pactl set-sink-volume @DEFAULT_SINK@ -5%
	amixer -q sset Master 5%-

elif [[ "$1" == "mute" ]]; then
	# Speaker mute/unmute toggle
	#pactl set-sink-mute @DEFAULT_SINK@ toggle
	amixer -q sset Master toggle

elif [[ "$1" == "mic" ]]; then
	# Microphone mute/unmute toggle
	#pactl set-source-mute @DEFAULT_SOURCE@ toggle
	amixer sset Capture toggle
fi

# Get volume
left="$(amixer sget Master | sed -n 's/.*Left:.*\[\(.*\)%.*/\1/p')"
right="$(amixer sget Master | sed -n 's/.*Right:.*\[\(.*\)%.*/\1/p')"
if [[ "$left" == "$right" ]]; then
	volume="$left%"
else
	volume="$left% - $right%"
fi

# TODO: Get mute

# Popup notification for volume
notify-send \
	-t 400 \
	-u normal \
	-h string:x-canonical-private-synchronous:volume \
	"Volume: $volume"

